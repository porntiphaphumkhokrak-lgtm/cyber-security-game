<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Defense Game</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap');

        body {
            font-family: 'Kanit', Arial, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); /* Galaxy-like gradient */
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            color: #e0e0e0; /* Light grey for text */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top */
            min-height: 100vh;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #game-container {
            background: rgba(10, 10, 35, 0.9); /* Darker, slightly transparent background */
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            width: 90%;
            max-width: 800px;
            border: 1px solid rgba(70, 70, 120, 0.5); /* Subtle border */
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #8aff8a; /* Bright green for heading */
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 10px rgba(138, 255, 138, 0.6);
            letter-spacing: 1.5px;
        }

        h2 {
            color: #a0c4ff; /* Lighter blue for subheadings */
            border-bottom: 2px solid rgba(160, 196, 255, 0.3);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ */
        #rules-box {
            background-color: rgba(40, 40, 80, 0.7); /* Dark blue-purple with transparency */
            border: 1px solid rgba(130, 130, 180, 0.5);
            padding: 18px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        }
        #rules-box h3 {
            color: #ffda79; /* Warm yellow for rules heading */
            margin-top: 0;
            text-shadow: 0 0 5px rgba(255, 218, 121, 0.4);
        }
        #rules-box p {
            color: #e0e0e0;
            line-height: 1.6;
        }
        #rules-box strong {
            color: #fff;
        }


        #status-bar {
            display: flex;
            justify-content: space-around;
            padding: 12px;
            margin-bottom: 25px;
            background-color: rgba(30, 30, 60, 0.8); /* Darker status bar */
            border-radius: 8px;
            font-weight: bold;
            color: #c0fefe; /* Light cyan for status text */
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }

        /* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏µ‡πÄ‡∏°‡∏• */
        #email-list {
            border: 1px solid rgba(100, 100, 150, 0.5);
            border-radius: 8px;
            max-height: 450px;
            overflow-y: auto;
            background-color: rgba(20, 20, 50, 0.8);
        }

        .email-item {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(60, 60, 100, 0.5);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .email-item:last-child {
            border-bottom: none;
        }

        .email-item:hover {
            background-color: rgba(50, 50, 100, 0.7);
            transform: translateX(5px);
        }

        .email-sender {
            font-weight: bold;
            color: #9efff0; /* Bright aqua for sender */
            text-shadow: 0 0 3px rgba(158, 255, 240, 0.3);
        }

        .email-subject {
            margin-left: 10px;
            color: #d0d0ff; /* Light purple for subject */
        }

        /* Modal (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏•) */
        .modal {
            display: none; 
            position: fixed;
            z-index: 100; /* Higher z-index */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7); /* Darker, more opaque background */
            backdrop-filter: blur(5px); /* Frosted glass effect */
        }

        .modal-content {
            background-color: rgba(25, 25, 60, 0.95);
            margin: 8% auto;
            padding: 30px;
            border: 1px solid rgba(100, 100, 150, 0.8);
            width: 85%;
            max-width: 650px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 10px 40px rgba(0, 255, 255, 0.3);
            animation: modalSlideIn 0.4s ease-out;
            color: #e0e0e0;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-content h3 {
            color: #8aff8a;
            border-bottom: 1px solid rgba(138, 255, 138, 0.3);
            padding-bottom: 10px;
            margin-bottom: 15px;
            text-shadow: 0 0 5px rgba(138, 255, 138, 0.5);
        }

        .modal-content p {
            color: #d0d0ff;
        }

        .close-button {
            color: #ff6b6b; /* Red for close button */
            float: right;
            font-size: 32px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            transition: color 0.2s ease, transform 0.2s ease;
        }

        .close-button:hover,
        .close-button:focus {
            color: #ff0000;
            text-decoration: none;
            cursor: pointer;
            transform: rotate(90deg);
        }

        #action-buttons {
            margin-top: 30px;
            text-align: center;
        }

        .btn-success, .btn-danger {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 0 15px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Kanit', Arial, sans-serif;
            font-size: 1rem;
        }

        .btn-success {
            background-color: #28a745; /* Original green */
            color: white;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
            background-color: #218838;
        }

        .btn-danger {
            background-color: #dc3545; /* Original red */
            color: white;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
        }
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.6);
            background-color: #c82333;
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï */
        .suspicious-link {
            color: #ff6b6b; /* Bright red for suspicious links */
            text-decoration: underline;
            font-weight: bold;
            background-color: rgba(255, 0, 0, 0.1);
            padding: 2px 5px;
            border-radius: 3px;
        }

        /* Scrollbar styles for galaxy theme */
        #email-list::-webkit-scrollbar {
            width: 10px;
        }

        #email-list::-webkit-scrollbar-track {
            background: rgba(30, 30, 60, 0.8);
            border-radius: 10px;
        }

        #email-list::-webkit-scrollbar-thumb {
            background-color: #a0c4ff; /* Light blue scrollbar */
            border-radius: 10px;
            border: 2px solid rgba(30, 30, 60, 0.8);
        }

        #email-list::-webkit-scrollbar-thumb:hover {
            background-color: #c0fefe; /* Lighter on hover */
        }
    </style>
</head>
<body>
    
    <div id="game-container">
        <h1>üìß Phishing Defense Simulator</h1>

        <div id="rules-box">
            <h3>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤</h3>
            <p>
                **‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤:** ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏±‡∏¢‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏° ‡∏´‡∏£‡∏∑‡∏≠ ‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Phishing) ‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô Phishing ‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Legit) ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î!
            </p>
        </div>
        <div id="status-bar">
            <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></p>
            <p>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£: <span id="remaining-emails">5</span></p>
            <p>‡πÄ‡∏ß‡∏•‡∏≤: <span id="timer">60</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
        </div>

        <div id="inbox-container">
            <h2>‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤ (Inbox)</h2>
            <div id="email-list">
                </div>
        </div>
    </div>

    <div id="email-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="detail-subject">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:</h3>
            <p>‡∏à‡∏≤‡∏Å: <span id="detail-sender"></span></p>
            <hr>
            <div id="detail-body">
                </div>
            <div id="action-buttons">
                <button id="btn-legit" class="btn-success">‚úÖ ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠ (‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏à‡∏£‡∏¥‡∏á)</button>
                <button id="btn-phish" class="btn-danger">‚ùå ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Phishing (‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏•‡∏≠‡∏°)</button>
            </div>
        </div>
    </div>

    <script>
        const emailData = [
            // ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏à‡∏£‡∏¥‡∏á (Legit) - answer: 'legit'
            { sender: "‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ X", subject: "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", isPhishing: false, body: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤, ‡πÄ‡∏£‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ 10:00 ‡∏ô. ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà **https://bankx.com/login** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö" },
            { sender: "IT Support (internal)", subject: "‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", isPhishing: false, body: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô, ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢" },
            { sender: "HR Department", subject: "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏õ‡∏µ 2568", isPhishing: false, body: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞, ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô SharePoint (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£) **sharepoint.company.com/benefits** ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞" },
            
            // ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏•‡∏≠‡∏° (Phishing) - answer: 'phish'
            { sender: "PayPal Service &lt;paypal-verify@service.co.biz&gt;", subject: "‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏£‡∏∞‡∏á‡∏±‡∏ö! [URGENT]", isPhishing: true, body: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤, ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ PayPal ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• <span class='suspicious-link'>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</span> (‡∏•‡∏¥‡∏á‡∏Å‡πå: http://paypa1-security.com/update)" },
            { sender: "Microsoft Security", subject: "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏ç‡πà‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", isPhishing: true, body: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏õ‡πá‡∏ô iPhone 16 Pro Max <span class='suspicious-link'>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</span> (‡∏•‡∏¥‡∏á‡∏Å‡πå: http://m1crosoft-winner.net/prize-claim)" },
            { sender: "Netflix Support", subject: "‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò", isPhishing: true, body: "‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ <span class='suspicious-link'>‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</span> (‡∏•‡∏¥‡∏á‡∏Å‡πå: http://netfIix-payment.com)" },
            { sender: "Apple Inc.", subject: "‡∏°‡∏µ‡∏Ñ‡∏ô‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Apple ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", isPhishing: true, body: "‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏∏‡∏ì ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: <span class='suspicious-link'>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</span> (‡∏•‡∏¥‡∏á‡∏Å‡πå: http://apple-id-security.org/cancel)" },
        ];

        let currentEmails = [];
        let score = 0;
        let timeLeft = 60;
        let timerInterval;
        let emailHandled = 0;
        const totalEmailsToHandle = 5;

        // Elements
        const emailListEl = document.getElementById('email-list');
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const remainingEmailsEl = document.getElementById('remaining-emails');
        const modal = document.getElementById('email-detail-modal');
        const closeButton = document.querySelector('.close-button');
        const btnLegit = document.getElementById('btn-legit');
        const btnPhish = document.getElementById('btn-phish');
        let currentEmail = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Modal

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
        function startGame() {
            score = 0;
            timeLeft = 60;
            emailHandled = 0;
            scoreEl.textContent = score;
            remainingEmailsEl.textContent = totalEmailsToHandle;
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏°‡∏≤ 5 ‡∏â‡∏ö‡∏±‡∏ö
            currentEmails = shuffleArray(emailData).slice(0, totalEmailsToHandle);
            
            renderEmailList();
            startTimer();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Array (Shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏µ‡πÄ‡∏°‡∏•
        function renderEmailList() {
            emailListEl.innerHTML = '';
            currentEmails.forEach((email, index) => {
                if (!email.isHandled) {
                    const emailDiv = document.createElement('div');
                    emailDiv.classList.add('email-item');
                    emailDiv.dataset.index = index;
                    emailDiv.innerHTML = `<span class="email-sender">${email.sender}</span> - <span class="email-subject">${email.subject}</span>`;
                    emailDiv.addEventListener('click', () => openEmailDetail(email));
                    emailListEl.appendChild(emailDiv);
                }
            });
            // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î ‡πÉ‡∏´‡πâ‡∏à‡∏ö‡πÄ‡∏Å‡∏°
            if (emailHandled >= totalEmailsToHandle) {
                endGame("win");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏•
        function openEmailDetail(email) {
            currentEmail = email;
            document.getElementById('detail-subject').textContent = `‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠: ${email.subject}`;
            document.getElementById('detail-sender').innerHTML = `‡∏à‡∏≤‡∏Å: <span style="color: #9efff0;">${email.sender}</span>`; /* Apply color to sender in modal */
            document.getElementById('detail-body').innerHTML = email.body;
            modal.style.display = 'block';
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Modal
        function closeEmailDetail() {
            modal.style.display = 'none';
            currentEmail = null;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
        function checkAnswer(isPlayerPhishChoice) {
            if (!currentEmail) return;

            // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            const isCorrect = (isPlayerPhishChoice && currentEmail.isPhishing) || 
                                (!isPlayerPhishChoice && !currentEmail.isPhishing);

            if (isCorrect) {
                score += 10;
                alert("‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
            } else {
                score -= 5;
                alert(`‚ùå ‡∏ú‡∏¥‡∏î! ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ${currentEmail.isPhishing ? '‡πÄ‡∏õ‡πá‡∏ô Phishing' : '‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏à‡∏£‡∏¥‡∏á'} - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏î`);
            }

            scoreEl.textContent = score;
            
            // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            currentEmail.isHandled = true;
            emailHandled++;
            remainingEmailsEl.textContent = totalEmailsToHandle - emailHandled;

            closeEmailDetail();
            renderEmailList();
        }

        // Event Listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô Modal
        btnLegit.addEventListener('click', () => checkAnswer(false));
        btnPhish.addEventListener('click', () => checkAnswer(true));
        closeButton.addEventListener('click', closeEmailDetail);

        // ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å Modal
        window.onclick = function(event) {
            if (event.target == modal) {
                closeEmailDetail();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;

                if (timeLeft <= 0) {
                    endGame("timeup");
                }
            }, 1000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏ö‡πÄ‡∏Å‡∏° (‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
        function endGame(reason) {
            clearInterval(timerInterval);
            emailListEl.innerHTML = '';
            
            let message = `‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢: **${score}** ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô\n\n`;
            
            if (reason === "timeup" || score <= 0) { // ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÅ‡∏û‡πâ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
                message += "‚ùå ‡∏≠‡πà‡∏≤‡∏ô‡∏î‡∏µ‡πÜ‡∏´‡∏ô‡πà‡∏≠‡∏¢"; 
            } else if (reason === "win") {
                message += "üèÜ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å"; 
            }
            
            alert(message);
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
            startGame();
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        document.addEventListener('DOMContentLoaded', startGame);
    </script>
</body>
</html>
